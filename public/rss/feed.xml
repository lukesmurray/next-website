<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Luke Murray's Site</title>
        <link>https://lsmurray.com</link>
        <description>Luke Murray's dev blog and personal site</description>
        <lastBuildDate>Sun, 04 Apr 2021 14:50:51 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>Feed for Node.js</generator>
        <language>en</language>
        <copyright>© 2021, Luke Murray</copyright>
        <item>
            <title><![CDATA[Another test post]]></title>
            <link>https://lsmurray.com/test/another-test-post</link>
            <guid>https://lsmurray.com/test/another-test-post</guid>
            <pubDate>Wed, 24 Mar 2021 12:21:53 GMT</pubDate>
            <description><![CDATA[Another example post in the section for testing layouts]]></description>
            <content:encoded><![CDATA[<div><p><img src="https://i.imgur.com/d1JHPRq.jpeg"/></p></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Test Post]]></title>
            <link>https://lsmurray.com/test/test-post</link>
            <guid>https://lsmurray.com/test/test-post</guid>
            <pubDate>Wed, 24 Mar 2021 12:21:53 GMT</pubDate>
            <description><![CDATA[An example post in the section for testing layouts]]></description>
            <content:encoded><![CDATA[<div><p><a class="internal" href="/til/fuzzy-search-json-file"><span>../../til/fuzzy-search-json-file.md</span></a></p><p><a class="internal" href="/blog/database-first-development"><span>../../blog/database-first-development/index.mdx</span></a></p><p>My <a href="../../til/fuzzy-search-json-file.md" class="internal"><span>fuzzy search post</span></a></p><p><a href="https://google.com">google</a></p><p>This is some content <sup id="fnref-1"><a href="#fn-1" class="footnote-ref internal"><span>1</span></a></sup></p><div class="footnotes"><hr/><ol><li id="fn-1">And this is a footnote<a href="#fnref-1" class="footnote-backref internal">↩</a></li></ol></div></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Replicating a Clothing Pattern]]></title>
            <link>https://lsmurray.com/blog/replicating-a-clothing-pattern</link>
            <guid>https://lsmurray.com/blog/replicating-a-clothing-pattern</guid>
            <pubDate>Thu, 14 Jan 2021 18:19:51 GMT</pubDate>
            <description><![CDATA[Using patterns and masks to replicate a design found on a pair of jeans.]]></description>
            <content:encoded><![CDATA[<div><p>The other day I had a ton of fun replicating a design found on this pair of jeans.</p><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:135.663082437276%"></div><img alt="the original design on the jeans" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><p>I wanted to document some of the design process of translating a design from the real world into code.
All of the code is written on <a href="http://observablehq/@lukesmurray/svg-spirals">observablehq</a> and it makes use of some features specific to observable, mostly the <a href="https://github.com/observablehq/stdlib#svg">svg literal</a>.</p><h2>Design Process</h2><p>I knew svg&#x27;s would be a good place to start for replicating the design.
The design consists of simple shapes and svgs are great at drawing simple shapes.</p><p>The first step was to create a series of circles in a bullseye pattern.
The design is essentially a repeating grid of bullseye patterns cut out into a square.
The simplest way to create this type of cut out bullseye is to use the svg itself as the boundaries of the square and then stack circles on top of each other to create the rings.
The circles all increment by the same amount so we can map a javascript array to a list of <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/circle">svg <code>circle</code> elements</a>.</p><div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token comment">// width of a stroke</span>
  <span class="token keyword">const</span> circleSize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token comment">// size of the pattern</span>
  <span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> center <span class="token operator">=</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token comment">// number of circles to draw</span>
  <span class="token keyword">const</span> numCircles <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">ceil</span><span class="token punctuation">(</span>size <span class="token operator">/</span> circleSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> svg<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token svg language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">(</span>numCircles<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
        svg<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token svg language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>circleSize <span class="token operator">*</span> i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
          i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;red&quot;</span><span class="token operator">:</span> &quot;white
        <span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">/* reverse the array so the smallest circle is on the top */</span> <span class="token interpolation-punctuation punctuation">}</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:100%"></div><img alt="bullseye" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><p>That already looks good.
The next step is to try and repeat the bullseye across the svg.
We could write a bunch of code to repeat <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/rect">svg <code>rect</code> elements</a> elements across the svg.
But we might have a bug in our code, and its easier to let the browser take care of the repetition.</p><ul><li>Writing declarative code is usually easier than writing imperative code.</li></ul><p>The trick is to use an <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/pattern">svg <code>pattern</code> element</a>.
We draw our bullseye in the pattern, then we use the pattern as the fill on full size rect.
The effect is our bullseye is repeated across the entire svg.</p><div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token comment">// width of a stroke</span>
  <span class="token keyword">const</span> circleSize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token comment">// size of the pattern</span>
  <span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> center <span class="token operator">=</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token comment">// number of circles to draw</span>
  <span class="token keyword">const</span> numCircles <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">ceil</span><span class="token punctuation">(</span>size <span class="token operator">/</span> circleSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> svg<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token svg language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>defs</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>circles<span class="token punctuation">&quot;</span></span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">patternUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userSpaceOnUse<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">(</span>numCircles<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
        svg<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token svg language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>circleSize <span class="token operator">*</span> i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
          i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;red&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;white&quot;</span>
        <span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>defs</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url(#circles)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:41.92872117400419%"></div><img alt="repeating bullseye" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><p>This is already pretty good but if we look closely at the design on the jeans we can see the circles switch colors at certain points.</p><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:115.42288557213931%"></div><img alt="circles with alternating colors" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><p>In order to create the alternating colors we&#x27;ll want to overlay two rectangles on top of each other.
The bottom rectangle will have <code>red, white</code> circles.
The top rectangle will have <code>white, red</code> circles.
We&#x27;ll need to cut out pieces of the top rectangle so we can see the bottom rectangle.
We&#x27;ll explain cutting out in a second.
But first lets draw the bullseye from before with swapped colors.</p><p>It&#x27;s actually very easy we just need to swap the ordering of the color in our fill.</p><div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  $<span class="token punctuation">{</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">(</span>numCircles<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
        svg<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token svg language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>circleSize <span class="token operator">*</span> i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
<span class="token operator">-</span>          i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;red&quot;</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span>
<span class="token operator">+</span>          i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;white&quot;</span><span class="token operator">:</span> <span class="token string">&quot;red&quot;</span>
        <span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre></div><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:41.92872117400419%"></div><img alt="repeating bullseye with swapped colors" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><p>Now we have the basic building blocks of our visualization but we want to overlay the two visualizations on top of one another with circular cut outs.
In order to create the cutouts we&#x27;ll use an <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/mask">svg <code>mask</code> elements</a>.</p><p>A mask can be used to make parts of an svg element transparent.
The black parts of the mask are completely rendered and the white parts of the mask are completely blocked out.</p><ul><li>We could try to use an <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/clipPath">svg <code>clipPath</code> element</a> to do our masking but clipPath elements do not support patterns and patterns make writing our code much easier</li></ul><p>The trick to creating the mask is to overlay two rectangles.
The first rectangle is <code>white</code> which means we render everything.
The second rectangle is rendered with a pattern of <code>black</code> circles which are the same size as our bullseye.
The part in the circle will be hidden and the part outside the circle will be rendered.</p><div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token comment">// size of the pattern</span>
  <span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> center <span class="token operator">=</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token comment">// number of circles to draw</span>
  <span class="token keyword">const</span> numCircles <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">ceil</span><span class="token punctuation">(</span>size <span class="token operator">/</span> circleSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> svg<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token svg language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>defs</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>outlineMaskCircles<span class="token punctuation">&quot;</span></span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
      size <span class="token operator">/</span> <span class="token number">2</span>
    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">patternUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userSpaceOnUse<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>black<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mask</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>outlineMask<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>white<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url(#outlineMaskCircles)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mask</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>defs</span><span class="token punctuation">&gt;</span></span>


  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>black<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">mask</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url(#outlineMask)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:41.92872117400419%"></div><img alt="the final mask pattern" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><p>Now that we have all the individual components we can bring them together and compare them to the original design.</p><div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  <span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> center <span class="token operator">=</span> size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> numCircles <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">ceil</span><span class="token punctuation">(</span>size <span class="token operator">/</span> circleSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> svg<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token svg language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>defs</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cutoutMaskCircles<span class="token punctuation">&quot;</span></span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">0</span><span class="token interpolation-punctuation punctuation">}</span></span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">0</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">patternUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userSpaceOnUse<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size <span class="token operator">/</span> <span class="token number">2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>black<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mask</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cutoutMask<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>white<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url(#cutoutMaskCircles)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mask</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cutoutPattern<span class="token punctuation">&quot;</span></span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>squareSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>squareSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">patternUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userSpaceOnUse<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">(</span>numCircles<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
        svg<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token svg language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>circleSize <span class="token operator">*</span> i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
          i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> color2 <span class="token operator">:</span> color1
        <span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>circlePattern<span class="token punctuation">&quot;</span></span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>squareSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>squareSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">patternUnits</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userSpaceOnUse<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">(</span>numCircles<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
        svg<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token svg language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>center<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>circleSize <span class="token operator">*</span> i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
          i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> color1 <span class="token operator">:</span> color2
        <span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>defs</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url(#circlePattern)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url(#cutoutPattern)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">mask</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url(#cutoutMask)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:41.92872117400419%"></div><img alt="overlay of repeating bullseye with pattern on top" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><p>In my first attempt I got this interesting visualization but it isn&#x27;t quite right.
The alternating colors need to be offset from the centers.
There are probably multiple ways of offsetting the alternating colors but I chose to move the mask vertically by half a square size.</p><div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
<span class="token operator">-</span>    <span class="token operator">&lt;</span>pattern id<span class="token operator">=</span><span class="token string">&quot;cutoutMaskCircles&quot;</span> x<span class="token operator">=</span>$<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> y<span class="token operator">=</span><span class="token string">&quot;${0}&quot;</span> width<span class="token operator">=</span><span class="token string">&quot;${size}&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;${size}&quot;</span> patternUnits<span class="token operator">=</span><span class="token string">&quot;userSpaceOnUse&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">+</span>    <span class="token operator">&lt;</span>pattern id<span class="token operator">=</span><span class="token string">&quot;cutoutMaskCircles&quot;</span> x<span class="token operator">=</span>$<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> y<span class="token operator">=</span><span class="token string">&quot;${size / 2}&quot;</span> width<span class="token operator">=</span><span class="token string">&quot;${size}&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;${size}&quot;</span> patternUnits<span class="token operator">=</span><span class="token string">&quot;userSpaceOnUse&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:41.92872117400419%"></div><img alt="overlay of repeating bullseye with proper positioned pattern" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><p>At this point we&#x27;ve pretty much replicated the pattern from the jeans.
For some final tricks I used ellipses to render the mask instead of circles in order to create a nice gap in the pattern.
I also parameterized the radius of the inner most circle of the bullseye which is fun to control.
I&#x27;ve embedded the final visualization below and you can also <a href="https://observablehq.com/@lukesmurray/svg-spirals">play with it and see all of the code on observablehq</a>.</p><h2>Visualization</h2><iframe width="100%" height="885" frameBorder="0" title="Svg Spirals" src="https://observablehq.com/embed/@lukesmurray/svg-spirals?cell=circles&amp;cell=viewof+squareSize&amp;cell=viewof+circleSize&amp;cell=viewof+innerCircleSize&amp;cell=viewof+gap&amp;cell=viewof+color1&amp;cell=viewof+color2"></iframe></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Sites which inspire the design of my own]]></title>
            <link>https://lsmurray.com/blog/blog-inspiration</link>
            <guid>https://lsmurray.com/blog/blog-inspiration</guid>
            <pubDate>Tue, 19 Jan 2021 13:03:52 GMT</pubDate>
            <description><![CDATA[A collection of sites and ideas from around the web which inspire the design and organization of this one.]]></description>
            <content:encoded><![CDATA[<div><ul><li>While designing this website I followed the advice from <a href="https://refactoringui.com/">Refactoring UI</a> to<ol><li>start with features</li><li>Hold the color</li><li>Iterate</li></ol></li></ul><ul><li>Monochrome or Grayscale<ul><li><a href="https://www.gwern.net/About">Gwern.net</a></li><li>A lot of inspiration from this <a href="https://twitter.com/gwern/status/1092221945427517440">twitter thread</a> by Gwern.</li><li><a href="https://practicaltypography.com/trademark-and-copyright-symbols.html">Matthew Butterick&#x27;s Practical Typography</a></li><li><a href="https://www.readthesequences.com/">Rationality from AI to Zombies</a> by Eliezer Yudkowsky</li><li><a href="https://www.nytimes.com/">The New York Times</a></li></ul></li></ul><ul><li><p>Semantic HTML</p><ul><li><a href="https://stackoverflow.com/questions/26883406/how-to-use-section-and-article-tags-in-html5/26887006#26887006">html - How to use <!-- -->&lt;<!-- -->section<!-- -->&gt;<!-- --> and <!-- -->&lt;<!-- -->article<!-- -->&gt;<!-- --> tags in HTML5? - Stack Overflow</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_HTML_sections_and_outlines">Using HTML sections and outlines - Developer guides | MDN</a></li></ul></li><li><p>CSS</p><ul><li><a href="https://meyerweb.com/">meyerweb.com</a> and <a href="https://meyerweb.com/ui/meyerweb.css">meyerweb css</a><ul><li><a href="https://meyerweb.com/eric/thoughts/2020/07/01/accordion-rows-in-css-grid/">Accordion Rows in CSS Grid  <!-- -->–<!-- -->  Eric’s Archived Thoughts</a></li><li><a href="https://alistapart.com/article/practical-grid/">Practical CSS Grid: Adding Grid to an Existing Design <!-- -->–<!-- --> A List Apart</a></li><li><a href="https://alistapart.com/article/faux-grid-tracks/">Faux Grid Tracks <!-- -->–<!-- --> A List Apart</a></li></ul></li></ul></li><li><p>Content Organization</p><ul><li><a href="https://simonwillison.net/">Simon Willison’s Weblog</a></li></ul></li></ul></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Using action driven animation]]></title>
            <link>https://lsmurray.com/blog/using-action-driven-animation</link>
            <guid>https://lsmurray.com/blog/using-action-driven-animation</guid>
            <pubDate>Tue, 30 Mar 2021 22:59:56 GMT</pubDate>
            <description><![CDATA[Applying action driven animation techniques to render footnotes and link previews.]]></description>
            <content:encoded><![CDATA[<div><p>I recently came across Tobias Ahlin&#x27;s post <a href="https://tobiasahlin.com/blog/meaningful-motion-w-action-driven-animation/">Meaningful motion with action-driven animation</a>.
The post captures one of those ideas which is so simple that it seems obvious in hindsight. <em>Animations are much more useful when they reflect the action the user took.</em></p><h2>What is action driven animation</h2><p>What does this mean? <a href="https://tobiasahlin.com/blog/meaningful-motion-w-action-driven-animation/">Tobias explains better than I ever could</a> but I&#x27;ll do my best. Take a simple case. We are displaying an alert to the user. The user can either accept or cancel the alert. If we use state driven animation then the alert can be in two states, visible or not visible. When the alert is visible we <em>fade it in</em> and when the alert is not visible we <em>fade it out</em>. Another way to animate the alert is by applying action driven animation. In the action driven paradigm we use the animation to indicate which action the user took. When the user accepts the alert we fade the alert out while animating it towards the user on the z-axis. When the user rejects the alert we fade it out while animating it away from the user on the z-axis. If that doesn&#x27;t make sense I <em>highly recommend</em> checking out the first two visual examples in <a href="https://tobiasahlin.com/blog/meaningful-motion-w-action-driven-animation/">Meaningful motion with action-driven animation</a>. Action driven animation simply feels intuitive. It adds that extra bit of <em>juice</em> <sup id="fnref-1"><a href="#fn-1" class="footnote-ref internal"><span>1</span></a></sup>.</p><h2>Using action driven animation for internal links</h2><aside style="border:2px solid var(--text-secondary-light);padding:0 2rem"><p><strong>⚠️ Touch Screen and Mobile Users</strong></p><p>The hover examples below do not work on touch devices! If you&#x27;re reading this on a touch device you&#x27;ll have to make do with the gifs! Tapping the links will not cause an animation to occur.</p></aside><p>I&#x27;ve added transclusion for internal links in several iterations of my blog. For example try hovering on this <a class="internal" href="/blog/using-action-driven-animation"><span>recursive link to this page</span></a>. Notice how the iframe grows in and out of the link, almost as if the preview is expanding from within the anchor tag? The animation is indicating to the user that the page is coming from <em>inside the link</em>. Implicitly the animation is reinforcing the concept that if the user clicks on the link they will navigate to the previewed page.</p><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:60.45283018867924%"></div><img alt="example internal link animation displaying a link preview growing from and shrinking into the anchor link" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><h2>Using action driven animation for footnotes</h2><p>Now try hovering on the footnote ref at the end of this sentence <sup id="fnref-2"><a href="#fn-2" class="footnote-ref internal"><span>2</span></a></sup>. Notice how the footnote travels from the bottom of the page to the location of the footnote? The animation is implicitly showing the user that the footnote is coming from the bottom of the page. On exit the footnote shrinks into the anchor tag reinforcing the concept that if the user clicks on the anchor tag they will navigate to the footnote content.</p><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:60.45283018867924%"></div><img alt="example footnote animation displaying a footnote preview translating up to and shrinking into the anchor link" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><h2>Applying the technique</h2><p>These examples are incredibly trivial but they add just a tiny bit of extra detail to the page, making the user experience that much more enjoyable.</p><p>I am definitely not a designer, but I love reading about design and this is one of the few techniques I&#x27;ve come across which immediately made me think, <em>if I learn how to apply this I can spark joy in people</em> <sup id="fnref-3"><a href="#fn-3" class="footnote-ref internal"><span>3</span></a></sup>. I love the notion of thinking about UI design as a process of story telling and animation is one of the most powerful tools we have available for telling that story. Tobias does a better job than I ever could of explaining how action driven animation can be used not just to make the user interfaces more intuitive, but even to teach the user how to use an application.</p><p>Although I rarely have time to add this much design detail to my research prototypes, if I ever do find some extra time, action driven animation is definitely going to be one of the first details I focus on.</p><div class="footnotes"><hr/><ol><li id="fn-1"><em>Juice</em> is a popular term used in game design to describe the intangible feelings and sensations people have when playing video games. <a href="https://www.youtube.com/watch?v=Fy0aCDmgnxg">Juice it or lose it</a> is a great example for seeing how much an experience can be transformed with the addition of some <em>juice</em>.<a href="#fnref-1" class="footnote-backref internal">↩</a></li><li id="fn-2">Hey 👋!<a href="#fnref-2" class="footnote-backref internal">↩</a></li><li id="fn-3">Another example is the use of light to create depth in <a href="https://refactoringui.com/book/">Refactoring UI</a> by Adam Wathan and Steve Schoger.<a href="#fnref-3" class="footnote-backref internal">↩</a></li></ol></div></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Fishbone lab diagrams]]></title>
            <link>https://lsmurray.com/blog/fishbone-lab-diagrams</link>
            <guid>https://lsmurray.com/blog/fishbone-lab-diagrams</guid>
            <pubDate>Tue, 19 Jan 2021 21:51:21 GMT</pubDate>
            <description><![CDATA[Implementing fishbone lab diagrams as svg elements for the web]]></description>
            <content:encoded><![CDATA[<div><p>Fishbone charts are a type of shorthand found in medicine so that doctors do not have to write out the names and units for common measurements.</p><p>The most common fishbone charts are the Complete Blood Count chart, the Chem 7 Chart, the Chem 10 chart, and the Liver Enzyme chart.</p><p>Although these charts originated in paper notes they are now used as simple data visualizations in some electronic health record applications because they can rapidly convey common information with fewer labels than an equivalent table.</p><p>There seems to be a lack of information about fishbone charts online with most practitioners describing them as intrinsic knowledge which is passed on without being formally recorded.</p><p>I was able to find some examples on <a href="https://medicalsciences.stackexchange.com/questions/17847/which-lab-value-skeleton-diagrams-are-used-to-display-results-for-cbc-chemistry">stack exchange</a> and <a href="https://www.khanacademy.org/science/health-and-medicine/lab-values-unit/lab-values/v/introduction-to-lab-values-and-normal-ranges">khan academy</a> and <a href="https://twitter.com/DavidSteensma/status/1280900821639553025">twitter</a>. The khan academy reference is by far the best reference I found.</p><p>They also seem to show up when you type <a href="https://www.google.com/search?q=lab+value+diagrams&amp;sxsrf=ALeKk01xpV7Pa_0MJvkjtJ0rWSrprTqZ4Q:1611089189019&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=2ahUKEwiD7b_27qjuAhXGnuAKHVviAIUQ_AUoAXoECCIQAw&amp;cshid=1611089258669345&amp;biw=2560&amp;bih=1328">lab value diagram</a> into google images.</p><p>I spent a bit of time today creating SVG representations of the complete blood count and chem 7 fishbone diagrams. Check them out below or on <a href="https://observablehq.com/@lukesmurray/medical-lab-diagrams">observablehq</a>.
If you find these useful and would want to use them in your own projects, let me know and I can try to package them into a component library.
The current code is a bit messy since it will be translated to react eventually.</p><iframe width="100%" height="370" frameBorder="0" title="Medical Lab Diagrams" src="https://observablehq.com/embed/@lukesmurray/medical-lab-diagrams?cell=chem7Title&amp;cell=chem7&amp;cell=cbcTitle&amp;cell=cbc"></iframe></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Typescript Algos]]></title>
            <link>https://lsmurray.com/blog/typescript-algos</link>
            <guid>https://lsmurray.com/blog/typescript-algos</guid>
            <pubDate>Thu, 31 Dec 2020 17:42:34 GMT</pubDate>
            <description><![CDATA[A small collection of algorithms I've written for use in my projects.]]></description>
            <content:encoded><![CDATA[<div><ul><li><p>a ton of my phd research involves building interfaces in typescript</p></li><li><p>over the past year I&#x27;ve often found myself frustrated by the state of algorithm libraries in javascript</p></li><li><p>many algorithm libraries are <a href="https://github.com/trekhleb/javascript-algorithms">pedagogical</a>, <a href="https://github.com/mauriciosantos/Buckets-JS">stagnant</a>, or <a href="https://github.com/Yomguithereal/mnemonist">slow to develop</a>.</p></li><li><p>a lot of my algorithm work involves string parsing, Aho Corasick, compressed tries.</p><ul><li>these algorithms wouldn&#x27;t fit into existing libraries very well</li></ul></li><li><p>so i decided to write my own algorithm library</p></li><li><p>why do this?</p><ul><li><p>writing your own algorithm library is an amazing pedagogical experience for yourself</p></li><li><p>I can build on top of the algorithm library</p><ul><li><iframe width="100%" height="626" frameBorder="0" title="City Visualizer" src="https://observablehq.com/embed/@lukesmurray/city-visualizer?cell=canvas&amp;cell=viewof+name"></iframe></li><li><iframe width="100%" height="1038" frameBorder="0" title="Weighted Sunburst Names" src="https://observablehq.com/embed/@lukesmurray/weighted-sunburst-names?cell=display"></iframe></li></ul></li></ul></li><li><p>when I have issues I can resolve them instantly, all the code is mine</p></li></ul></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Quake Applications For Mac]]></title>
            <link>https://lsmurray.com/blog/quake-applications-for-mac</link>
            <guid>https://lsmurray.com/blog/quake-applications-for-mac</guid>
            <pubDate>Sat, 20 Feb 2021 16:42:46 GMT</pubDate>
            <description><![CDATA[Create quake style dropdown windows for any application.]]></description>
            <content:encoded><![CDATA[<div><p>I recently decided to replace <a href="https://iterm2.com/">iTerm</a> on my mac with <a href="https://sw.kovidgoyal.net/kitty/">Kitty</a>.
iTerm is a <a href="https://www.slant.co/topics/525/~best-terminal-emulators-for-mac">super popular terminal</a> but it <a href="https://gitlab.com/gnachman/iterm2/-/issues/5240">uses a ton of CPU and power</a>.
If I have iTerm open when I’m traveling I have to keep my computer plugged in or I’ll burn through my battery in 2-3 hours.</p><p>Kitty is lightning fast and much more energy efficient.
But Kitty provides a less polished experience out of the box than iTerm2.
One of the main things I missed from iTerm was the <a href="http://freesoftwaremagazine.com/articles/how_to_use_quake-style_terminals_on_GNU_Linux/">quake inspired</a> Hotkey Window feature.</p><p>The Hotkey Window lets you pull up a terminal anywhere using a keyboard shortcut.
Why would you want to do this?
The <a href="http://guake-project.org/">Guake Project</a> (a quake style terminal for Gnome) explains very well. </p><blockquote><p>Imagine you are working in your favorite text editor and want to execute some commands, like execute the unit test of your code, check a man page, or edit some configuration file. You can do it at lightning speed without leaving your keyboard. Just press your predefined <!-- -->[<!-- -->...<!-- -->]<!-- --> hotkey, execute your command, and repress it to hide the terminal and go back to your work.</p></blockquote><p>I also use quake style terminals to have more screen real estate on my laptop.
I use <a href="https://rectangleapp.com/">rectangle</a> to keep my browser maximized on the left side of the screen and vscode maximized on the right side of the screen.</p><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:62.5%"></div><img alt="My usual setup with a browser on the left and vscode on the right" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><p>If I want to see my terminal I need to either make my browser or code window smaller.
I could use <code>cmd+tab</code> or the mouse to switch to my terminal but these options are annoying.
<code>cmd+tab</code> always seems to go to the wrong app, and mission control involves reaching for the mouse or track pad which is often a nuisance.</p><p>Kitty has an <a href="https://github.com/kovidgoyal/kitty/issues/45">open issue</a> to create a quake style mode but the developer does not want to implement code which relies on a window manager because it is too OS specific.</p><p>At this point I felt like I would have to choose between having a fast terminal with no quake feature, or accept that I love quake style drop downs so much that I’m ok with my computer constantly running out of battery.</p><p>Then I stumbled upon <a href="https://github.com/kasper/phoenix">phoenix</a>, a tool which lets you write javascript code which hooks into the macOS window manager.
I decided to try and write my own script to emulate a quake style drop down for kitty.
Originally I just wanted to use a shortcut to make Kitty show up on the top half of my screen.
But after a bit of hacking I&#x27;ve been able to emulate all of the features of the iTerm2 hotkey.
In addition my script lets me emulate iTerm&#x27;s Hotkey Window feature for any application.</p><p>This is all the code I need to implement an iTerm style window for kitty.</p><div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token function">guakeApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// bind cmd + ` to open kitty</span>
  key<span class="token operator">:</span> <span class="token string">&quot;`&quot;</span><span class="token punctuation">,</span>
  modifiers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;cmd&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  appName<span class="token operator">:</span> <span class="token string">&quot;kitty&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// open in the top half of the screen</span>
  position<span class="token operator">:</span> topHalf<span class="token punctuation">,</span>
  <span class="token comment">// on the screen containing the mouse</span>
  followsMouse<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// hide when another application gets focus</span>
  hideOnBlur<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>And here is a screenshot of the code in action.</p><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:62.5%"></div><img alt="Kitty Dropdown Example" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><p>I now use keyboard shortcuts to pull up Messages, Slack, Spotify, and other applications which usually require a context switch to view.</p><p>If you want to try it yourself. You&#x27;ll need to</p><ol><li>Install Phoenix <code>brew install --cask phoenix</code></li><li>Copy my <a href="https://github.com/lukesmurray/bootstrap/blob/fd621400cd2ec8cff6b06c0b883f191ecdb42197/.config/yadm/alt/.phoenix.js%23%23default">phoenix config</a> to <code>~/.phoenix.js</code></li><li>Try pressing cmd+<!-- -->`<!-- --> to open kitty, <code>alt+s</code> to open slack, <code>alt+m</code> to open messages, or <code>alt+p</code> to open spotify.</li></ol><p>If you want to customize the config just modify the <a href="https://github.com/lukesmurray/bootstrap/blob/fd621400cd2ec8cff6b06c0b883f191ecdb42197/.config/yadm/alt/.phoenix.js%23%23default#L46-L93"><code>guakeApp</code> calls</a>.</p></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Database First Development]]></title>
            <link>https://lsmurray.com/blog/database-first-development</link>
            <guid>https://lsmurray.com/blog/database-first-development</guid>
            <pubDate>Tue, 23 Mar 2021 04:33:28 GMT</pubDate>
            <description><![CDATA[An interesting paradigm for creating websites and blogging using next.js]]></description>
            <content:encoded><![CDATA[<div><p>This site is an exercise in database first development for blogging.
All of the pages in the site are parsed and stored in a sqlite database.
The site is then statically generated by querying the database using graphql.</p><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:47.85031847133758%"></div><img alt="Example Page DB" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><h2>Why would you build a site like this?</h2><p>I love to organize my thoughts in nested hierarchies and clusters <sup id="fnref-1"><a href="#fn-1" class="footnote-ref internal"><span>1</span></a></sup>. Some people are <em>definitely not obsessed with hierarchies, categories, tags, and clusters</em> <sup id="fnref-2"><a href="#fn-2" class="footnote-ref internal"><span>2</span></a></sup>, but if you are then you may have been frustrated with some of the JAMStack<sup id="fnref-3"><a href="#fn-3" class="footnote-ref internal"><span>3</span></a></sup> frameworks that have become popular recently.</p><p>If you every tried building nested sections and page hierarchy in <a href="http://gatsbyjs.com/">Gatsby</a> or <a href="http://nextjs.com">Next.js</a> you&#x27;ll know what I mean. Both the <a href="https://github.com/gatsbyjs/gatsby-starter-blog">default gatsby starter</a> and the <a href="https://github.com/vercel/next.js/tree/canary/examples/blog-starter">default next starter</a> have a single folder of posts. If you want to add sections or page organization based on the file system you need to <em>write your own api</em> which is easier said than done. Essentially you have Javascript and Markup but no API for your content.</p><p>Previous static site generators exist on the opposite side of the spectrum, thy have rich content APIs but no javascript.
Hugo&#x27;s API supports content organization with nested sections, leaves, categories, and tags out of the box. Unfortunately Hugo&#x27;s API is quite difficult to use in practice. Even though Hugo&#x27;s API is simple, Hugo pages are customized with a <a href="https://gohugo.io/templates/introduction/">weird template language</a> which uses hard to read prefix expressions.</p><p>Database first development brings the rich content organization of frameworks like Hugo into the new and fun react static blogging ecosystem. The result is a very performant, clean, and intuitive API over your content which you can use to make beautiful web experiences.</p><p>If we want to get the parent of the current we simply access the <code>currentPage.parent</code>. If we want to get all the child pages we can access <code>currentPage.pages</code>. Any relationship we encode in the database is just a query away. We could go even further, parse the markdown AST while creating the database, and encode a table of <code>Link</code>s with <code>target</code> and <code>source</code> pages. The link table would enable a trivial implementation for rendering backlinks and references. We could even use this table to find broken links in our site. Treating the database as a source of truth is powerful ✨.</p><h2>Why wouldn&#x27;t you build a site like this?</h2><p>All this power does not come for free.
Sure I could simply put my posts in a database and call it a day, but instead I use</p><ul><li><a href="https://www.prisma.io/">prisma</a> to create a sql schema</li><li><a href="https://github.com/MichalLytek/typegraphql-prisma#readme">typegraphql-prisma</a> to create a graphql schema</li><li><a href="https://www.apollographql.com/docs/apollo-server/">apollo-server</a> to serve a graphql api endpoint</li><li><a href="https://www.graphql-code-generator.com/">graphql-code-generator</a> to generate typescript types from graphql queries</li><li><a href="https://nextjs.org/">Next.js</a> to statically generate all my pages from this for a static site.</li></ul><p>All of these dependencies could break and I&#x27;m sure they would be annoying to fix. But hey <em>we&#x27;re having fun... right?</em> In addition, I would never bring any of this to a production site. As soon as you need to query at runtime the automatically generated apis and type safety lead to a bunch of performance issues. Luckily with a blog all my assets are statically generated so the performance issues are not a problem<sup id="fnref-4"><a href="#fn-4" class="footnote-ref internal"><span>4</span></a></sup>.</p><hr/><p>If you have ideas about what you would like to do or see in a database first blog, let me know on twitter <a href="https://twitter.com/@lukesmurray">@lukesmurray</a>.</p><div class="footnotes"><hr/><ol><li id="fn-1"><p><a href="https://simonwillison.net/">SimonWillison&#x27;s Weblog</a> is a good example of an extremely hierarchical and clustered site.<a href="#fnref-1" class="footnote-backref internal">↩</a></p></li><li id="fn-2"><p>Notably <a href="https://blog.jessfraz.com/">Jess Fraz&#x27;s Blog</a> which is amazing but is simply a list!<a href="#fnref-2" class="footnote-backref internal">↩</a></p></li><li id="fn-3"><p>JAMstack stands for <a href="https://jamstack.wtf/#meaning">Javascript, Apis, and Markup</a>. The idea is that you handle dynamic rendering with javascript, query your data with APIs, and write your content with markup.<a href="#fnref-3" class="footnote-backref internal">↩</a></p></li><li id="fn-4"><p>Check it out 😉, but <a href="https://www.matuzo.at/blog/building-the-most-inaccessible-site-possible-with-a-perfect-lighthouse-score/">don&#x27;t get too excited</a>.</p><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:95.54531490015361%"></div><img alt="Lighthouse Scores" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div><a href="#fnref-4" class="footnote-backref internal">↩</a></p></li></ol></div></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Replacing Tmux With Kitty]]></title>
            <link>https://lsmurray.com/blog/replacing-tmux-with-kitty</link>
            <guid>https://lsmurray.com/blog/replacing-tmux-with-kitty</guid>
            <pubDate>Tue, 23 Feb 2021 13:57:58 GMT</pubDate>
            <description><![CDATA[Steps to replace the useful aspects of my tmux workflow with kitty]]></description>
            <content:encoded><![CDATA[<div><p>I recently decided to switch my terminal from iTerm to Kitty.
Kitty is simply faster, much nicer to my battery, and more fun to work with since a lot of the internals are hackable with end user scripts.</p><p>In my last post I wrote about <a href="../quake-applications-for-mac/" class="internal"><span>replicating iTerm&#x27;s quake-like dropdown functionality</span></a> using <a href="https://github.com/kasper/phoenix">Phoenix</a>, a scriptable window manager for macOS.
In this post I&#x27;ll show how I replicated a bunch of the behavior from <a href="https://github.com/gpakosz/.tmux">gpakosz&#x27;s famous tmux config</a> using native Kitty.
If you absolutely must have persistent sessions and daemons then you&#x27;ll need to wait for <a href="https://github.com/kovidgoyal/kitty/issues/391">those to be implemented in kitty</a>.
But in the meantime you can replicate 90% of the pane and window behavior from gpakosz&#x27;s config with just a few additions to your kitty config.
At the end you&#x27;ll have a snappy terminal which has much nicer <a href="https://github.com/kovidgoyal/kitty/issues/391#issuecomment-638320745">energy and performance</a>.</p><p>The final kitty config files (which you can place in <code>~/.config/kitty</code>) can be found <a href="https://github.com/lukesmurray/bootstrap/tree/75b51d1/.config/kitty">here</a>.</p><ul><li><p>adding panes</p></li><li><p>moving panes</p></li><li><p>navigating panes</p></li><li><p>closing panes</p></li><li><p>resizing window</p></li><li><p>navigating window</p></li><li><p>closing windows</p></li><li><p>moving windows</p></li><li><p>toggling zoom</p></li><li><p>Future</p><ul><li>sessions</li><li>persistence</li><li>copy mode vi</li></ul></li></ul></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Becoming a better developer]]></title>
            <link>https://lsmurray.com/blog/becoming-a-better-developer</link>
            <guid>https://lsmurray.com/blog/becoming-a-better-developer</guid>
            <pubDate>Thu, 31 Dec 2020 17:08:14 GMT</pubDate>
            <content:encoded><![CDATA[<div><ul><li>Does reading source code make you a better developer or is it a waste of time?</li><li>I find that reading source code often helps me understand things but it comes at an opportunity cost<ul><li>instead of building features in my own library i&#x27;m building an understanding of someone else&#x27;s library</li></ul></li></ul><blockquote class="twitter-tweet" data-align="center"><p lang="en" dir="ltr">I don&#x27;t know if anyone else had this problem but I got 10x better at programming when I realized that I could read library/package code to help debug instead of treating it as a blackbox that&#x27;s always doing good things</p>— kipply is hugging you (@kipperrii) <a href="https://twitter.com/kipperrii/status/1342937424658374659?ref_src=twsrc%5Etfw">December 26, 2020</a></blockquote></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Hello world]]></title>
            <link>https://lsmurray.com/blog/hello</link>
            <guid>https://lsmurray.com/blog/hello</guid>
            <pubDate>Tue, 08 Dec 2020 01:06:23 GMT</pubDate>
            <description><![CDATA[My first post on this blog and a commitment to share what I build.]]></description>
            <content:encoded><![CDATA[<div><p>I fell in love with computer science because it was a tremendously enjoyable way to procrastinate doing my math homework.
Over the years I&#x27;ve battled my urge to procrastinate, building lists and keeping myself on strict habit regiments.
But I&#x27;ve come to terms with the fact that the procrastination will continue.
Hopefully this site can serve as a record of my constant side projects and explorations.</p><p>To get things started here is a visualization I made of cities in the US.
You can type city names and see where certain prefixes are more common.</p><iframe width="100%" height="955" frameBorder="0" title="City Visualizer" src="https://observablehq.com/embed/@lukesmurray/city-visualizer?cell=intro&amp;cell=canvas&amp;cell=viewof+name"></iframe></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Markdown Anki Decks]]></title>
            <link>https://lsmurray.com/blog/markdown-anki-decks</link>
            <guid>https://lsmurray.com/blog/markdown-anki-decks</guid>
            <pubDate>Wed, 23 Dec 2020 19:00:02 GMT</pubDate>
            <description><![CDATA[A command line program to convert markdown files into anki decks.]]></description>
            <content:encoded><![CDATA[<div><p>Today I published my second python cli tool, <a href="https://pypi.org/project/markdown-anki-decks/">markdown-anki-decks</a>.
The tool takes a directory of markdown files and converts them into a directory of anki decks.
Basically all of the code is glue code, the library builds on top of <a href="https://pypi.org/project/commonmark/">commonmark</a>, <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">beautifulsoup</a>, and <a href="https://github.com/kerrickstaley/genanki">genanki</a>.
But for a side project glue code is ideal.
There is very little to maintain.</p><p>I like the tool because it uses a straightforward syntax with <code>h2</code> headers converted to questions and everything between <code>h2</code> headers converted to answers. <em>Most importantly the tool automatically updates cards on follow up imports rather than duplicating them and losing your anki progress</em>. </p><p>I can now edit my anki decks using plain text, publish my anki decks as web pages using gatsby, and automatically generate my anki decks whenever I want to import them.</p><p>There are already several libraries which can be used to write anki decks in markdown but none of them quite do what I want.</p><ul><li><a href="https://github.com/benwr/ankdown">Ankdown</a> supports latex with Mathjax (my library does not), but Ankdown uses a very odd syntax for specifying cards and Ankdown card syncing breaks when cards are removed from the markdown file.</li><li><a href="https://github.com/ashlinchak/mdanki">mdanki</a> is actually very close to what I want but has issues with syncing and updating cards. If you try to reload the same deck every single card is duplicated. That problem might be solved soon but it makes the library useless since cards cannot be added to a deck without losing all progress.</li></ul><p>If you like <code>Ankdown</code> or <code>mdanki</code> but are frustrated by the same things I am then you may like <code>markdown-anki-decks</code>. Check out the <a href="https://github.com/lukesmurray/markdown-anki-decks">github repo</a> and let me know if you find it useful.</p></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Sudoku.com bookmarklet]]></title>
            <link>https://lsmurray.com/blog/sudoku-bookmarklet</link>
            <guid>https://lsmurray.com/blog/sudoku-bookmarklet</guid>
            <pubDate>Tue, 12 Jan 2021 21:21:02 GMT</pubDate>
            <description><![CDATA[Enable keyboard only input on sudoku.com]]></description>
            <content:encoded><![CDATA[<div><p>I created a bookmarklet which enables pressing <kbd>Shift</kbd> to insert pencil marks on <a href="https://sudoku.com">sudoku.com</a>.</p><h2>Want to use the bookmarklet?</h2><ul><li>Drag this link into your bookmark bar<ul><li><span><a href="javascript:(function()%7Bdocument.addEventListener(%22keydown%22%2C%20(e)%20%3D%3E%20%7Bif%20(event.key%20%3D%3D%3D%20%22Shift%22)%20%7Bdocument.querySelector(%22div.game-controls-item.game-controls-pencil%22).click()%3B%7D%7D)%3Bdocument.addEventListener(%22keyup%22%2C%20(e)%20%3D%3E%20%7Bif%20(event.key%20%3D%3D%3D%20%22Shift%22)%20%7Bdocument.querySelector(%22div.game-controls-item.game-controls-pencil%22).click()%3B%7D%7D)%7D)()">Sudoku.com keyboard shortcuts</a></span></li></ul></li></ul><p>Or</p><ul><li>Make a new bookmark in your browser (right-click on the <a href="https://support.google.com/chrome/answer/188842?hl=en&amp;visit_id=637460836103938044-1632714477&amp;rd=1">bookmarks bar</a> and click Add Page...)</li><li>Set the &quot;Name&quot; to something like &quot;Sudoku.com keyboard shortcuts&quot;</li><li>Paste the following codeblock into the &quot;Location&quot; of the bookmark</li></ul><div class="remark-highlight"><pre class="language-js"><code class="language-js">javascript<span class="token operator">:</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">7</span><span class="token maybe-class-name">Bdocument</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token number">22</span>keydown<span class="token operator">%</span><span class="token number">22</span><span class="token operator">%</span><span class="token number">2</span>C<span class="token operator">%</span><span class="token number">20</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">20</span><span class="token operator">%</span><span class="token number">3</span>D<span class="token operator">%</span><span class="token number">3</span>E<span class="token operator">%</span><span class="token number">20</span><span class="token operator">%</span><span class="token number">7</span><span class="token maybe-class-name">Bif</span><span class="token operator">%</span><span class="token number">20</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token operator">%</span><span class="token number">20</span><span class="token operator">%</span><span class="token number">3</span>D<span class="token operator">%</span><span class="token number">3</span>D<span class="token operator">%</span><span class="token number">3</span>D<span class="token operator">%</span><span class="token number">20</span><span class="token operator">%</span><span class="token number">22</span><span class="token maybe-class-name">Shift</span><span class="token operator">%</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">20</span><span class="token operator">%</span><span class="token number">7</span><span class="token maybe-class-name">Bdocument</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token number">22</span>div<span class="token punctuation">.</span><span class="token property-access">game</span><span class="token operator">-</span>controls<span class="token operator">-</span>item<span class="token punctuation">.</span><span class="token property-access">game</span><span class="token operator">-</span>controls<span class="token operator">-</span>pencil<span class="token operator">%</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">3</span>B<span class="token operator">%</span><span class="token number">7</span>D<span class="token operator">%</span><span class="token number">7</span>D<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">3</span><span class="token maybe-class-name">Bdocument</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token number">22</span>keyup<span class="token operator">%</span><span class="token number">22</span><span class="token operator">%</span><span class="token number">2</span>C<span class="token operator">%</span><span class="token number">20</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">20</span><span class="token operator">%</span><span class="token number">3</span>D<span class="token operator">%</span><span class="token number">3</span>E<span class="token operator">%</span><span class="token number">20</span><span class="token operator">%</span><span class="token number">7</span><span class="token maybe-class-name">Bif</span><span class="token operator">%</span><span class="token number">20</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token operator">%</span><span class="token number">20</span><span class="token operator">%</span><span class="token number">3</span>D<span class="token operator">%</span><span class="token number">3</span>D<span class="token operator">%</span><span class="token number">3</span>D<span class="token operator">%</span><span class="token number">20</span><span class="token operator">%</span><span class="token number">22</span><span class="token maybe-class-name">Shift</span><span class="token operator">%</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">20</span><span class="token operator">%</span><span class="token number">7</span><span class="token maybe-class-name">Bdocument</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token operator">%</span><span class="token number">22</span>div<span class="token punctuation">.</span><span class="token property-access">game</span><span class="token operator">-</span>controls<span class="token operator">-</span>item<span class="token punctuation">.</span><span class="token property-access">game</span><span class="token operator">-</span>controls<span class="token operator">-</span>pencil<span class="token operator">%</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">3</span>B<span class="token operator">%</span><span class="token number">7</span>D<span class="token operator">%</span><span class="token number">7</span>D<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">7</span>D<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2>Why</h2><p>In the midst of the 2020 pandemic I was very entertained for a couple of weeks watching the <a href="https://www.youtube.com/watch?v=V38qsL1cmFs">cracking the cryptic</a> youtube channel solve sudoku puzzles. The channel uses a couple of basic techniques to solve some pretty challenging problems, most notably Snyder notation.</p><p>The basis of Snyder notation is that you pencil mark a number in a cell when there are two possible locations for the number in the cell&#x27;s block. (Check out <a href="https://www.youtube.com/watch?v=gqh32EDSNOE">this cracking the cryptic video for a visual explanation</a>)</p><p>In the cracking the cryptic videos, the authors use a <a href="https://cracking-the-cryptic.web.app/sudoku/RRf6bgb9GG">self made app</a> to solve their puzzles.
Part of the allure of watching the authors solve sudoku puzzles is the clear speed and expertise the authors have using their app.
They are able to solve the sudoku puzzles at the speed of thought. It is very clear that they are using keyboard shortcuts.</p><p>Although the cracking the cryptic app is quite good it is only available for puzzles shared on the cracking the cryptic Youtube channel. <a href="https://www.reddit.com/r/sudoku/comments/e978gd/best_sudoku_website_with_shortcuts_for_pencil/">Like a couple other people</a> I found it pretty frustrating that there were so few apps which support keyboard shortcuts for pencil marks.</p><h2>How</h2><p>I built a bookmarklet for <a href="https://sudoku.com">Sudoku.com</a> which clicks on the pencil mark button when you press the shift key.</p><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:43.02325581395349%"></div><img alt="sudoku.com pencil mark button" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><p>The code is pretty straightforward and I&#x27;ve added an annotated version below.</p><div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token comment">// if the bookmarklet hasn&#x27;t been run</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">_sudoku_bookmarklet</span> <span class="token operator">!==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// when user presses shift click the pencil mark</span>
  <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keydown&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">key</span> <span class="token operator">===</span> <span class="token string">&quot;Shift&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token dom variable">document</span>
        <span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;div.game-controls-item.game-controls-pencil&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// when user release shift click the pencil mark</span>
  <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keyup&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">key</span> <span class="token operator">===</span> <span class="token string">&quot;Shift&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token dom variable">document</span>
        <span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;div.game-controls-item.game-controls-pencil&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// mark that the bookmarklet has been run</span>
<span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">_sudoku_bookmarklet</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><h2>What&#x27;s the point</h2><p>It&#x27;s cool that the browser is relatively hackable by end users.
I found an issue with an application on the internet and I aded a feature in just a couple of lines of code.</p><p>Unfortunately most of these solutions suffer from usability issues.
For many people dragging a bookmarklet and clicking it is already too complex.
Not because it is a complicated thing to do per se, but because it does not fit into their mental model of how browsers work.
For people who do drag the bookmarklet into their menu bar it is easy to forget the bookmarklet exists, and clicking a bookmarklet for every feature you want to add to a website isn&#x27;t really a nice experience.</p><p>Tools like tampermonkey and greasemonkey are interesting because they can run when a page loads but they are even more complicated than dragging a bookmarklet to the bookmark bar.</p><h2>Want More?</h2><p>If you really truly enjoy bookmarklets and keyboard shortcuts check out <a href="https://sudokuexchange.com/bookmarklets/">sudoku exchange</a> which has a set of bookmarklets for importing puzzles from other apps and has a bunch of nice keyboard shortcuts.</p></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Make Prettier Ignore Ranges]]></title>
            <link>https://lsmurray.com/til/make-prettier-ignore-ranges</link>
            <guid>https://lsmurray.com/til/make-prettier-ignore-ranges</guid>
            <pubDate>Wed, 24 Mar 2021 14:30:11 GMT</pubDate>
            <description><![CDATA[How to make the prettier default formatter ignore ranges]]></description>
            <content:encoded><![CDATA[<div><p>I used <a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode">prettier-vscode</a> to keep my code consistently formatted.
I also have VSCode automatically format my code on save.
This is super nice because when I make changes I don&#x27;t need to worry about creating weird diffs due to small formatting changes.
I simply save and get something which looks good enough.</p><div class="remark-highlight"><pre class="language-json"><code class="language-json"><span class="token property">&quot;editor.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre></div><h2>Problem</h2><p>Sometimes I have code which I don&#x27;t want prettier to change.
For example in my post <a href="./fuzzy-search-json-file.md" class="internal"><span>Fuzzy search Json Files</span></a> I have some exmaple json which is purposefully minified.
Prettier tries to be super helpful and unminmize the json for me whenever I save.
Sometimes I work around this issue by executing the vscode command <em>Save without Formatting</em> (<code>cmd + k s</code>) but that can get tedious if you&#x27;re working in a file that is being changed quite a bit.</p><h2>Solution</h2><p>Prettier supports <a href="https://prettier.io/docs/en/ignore.html#range-ignore">disabling formatting for ranges using html comments</a>!</p><div class="remark-highlight"><pre class="language-md"><code class="language-md"><span class="token comment">&lt;!-- prettier-ignore-start --&gt;</span>
<span class="token code"><span class="token punctuation">```</span><span class="token code-language">json</span>
<span class="token code-block language-json"><span class="token punctuation">{</span><span class="token property">&quot;my&quot;</span><span class="token operator">:</span> <span class="token string">&quot;minimized&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;json&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">}</span></span>
<span class="token punctuation">```</span></span>
<span class="token comment">&lt;!-- prettier-ignore-end --&gt;</span>
</code></pre></div></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Javascript functions can cause layout thrashing]]></title>
            <link>https://lsmurray.com/til/layout-thrashing</link>
            <guid>https://lsmurray.com/til/layout-thrashing</guid>
            <pubDate>Thu, 25 Mar 2021 18:06:52 GMT</pubDate>
            <description><![CDATA[How javascript methods can cause layout thrashing and greatly reduce your application's performance]]></description>
            <content:encoded><![CDATA[<div><p>Today I was profiling an application which uses autocomplete and I noticed that in the chrome dev tools it said ther ewas a forced layout occuring.</p><p>Turns out many of the javascript APIs which ask for the size or location of a DOM element will cause the browser to synchronously calculate the style and layout. <a href="https://gist.github.com/paulirish/5d52fb081b3570c81e3a">Paul Irish has an excellent list of most of these methods</a></p><p>In my case I am positioning a dropdown based on the current <a href="https://developer.mozilla.org/en-US/docs/Web/API/Selection">window selection&#x27;s</a> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Range">range</a>. Whenever the user types a character I call <code>range.getBoundingClientRect()</code> which is triggering a layout reflow in the browser.</p><p>I don&#x27;t have a great solution for this yet but I did find one other place in my application that was triggering forced layouts.</p><p>If you use <a href="https://github.com/atomiks/tippyjs">tippyjs</a> or <a href="https://github.com/popperjs/popper-core">popperjs</a> then you may ant to set your <a href="https://popper.js.org/docs/v2/utils/detect-overflow/#boundary">boundary</a> to <code>&quot;viewport&quot;</code>.
The default is to use <code>&quot;clippingParents&quot;</code> which will cause a layout to occur.</p></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Fuzzy search Json Files]]></title>
            <link>https://lsmurray.com/til/fuzzy-search-json-file</link>
            <guid>https://lsmurray.com/til/fuzzy-search-json-file</guid>
            <pubDate>Wed, 24 Mar 2021 14:09:03 GMT</pubDate>
            <description><![CDATA[How to use fzf and jq to fuzzy search a json file]]></description>
            <content:encoded><![CDATA[<div><h2>Problem</h2><p>You have a json file which contains an array of objects, and you want to filter objects which contain some specific data.
For example, in my case I wanted to find values which are associated with heart conditions.</p><div class="remark-highlight"><pre class="language-json"><code class="language-json"><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">&quot;uids&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">4723</span><span class="token punctuation">,</span><span class="token number">4724</span><span class="token punctuation">,</span><span class="token number">13338</span><span class="token punctuation">,</span><span class="token number">40309</span><span class="token punctuation">,</span><span class="token number">51486</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;synonyms&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;blood pressure high&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diastolic hypertension&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;elevated blood pressure&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;essential hypertension&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;high blood pressure&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;htn&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hypertension&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;malignant hypertension&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;pulmonary hypertension&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;systemic hypertension&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;common_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;hypertension&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;umls_cuis&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;C0020538&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C0020540&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C0085580&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C0221154&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C0235222&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;cond_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;C0020538,C0020540,C0085580,C0221154,C0235222&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;uids&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">2688</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;synonyms&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;DM&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes mellitus&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;common_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;diabetes mellitus&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;umls_cuis&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;C0011849&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;cond_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;C0011849&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">&quot;uids&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">2691</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;synonyms&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;DM2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;adult onset diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;adult onset diabetes mellitus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;aodm&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes mellitus ii&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes mellitus type 2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes mellitus type ii&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes type 2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes type ii&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;dmii&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;niddm&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;non-insulin dependent diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;non-insulin dependent diabetes mellitus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;non-insulin-dependent diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;non-insulin-dependent diabetes mellitus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;noninsulin-dependent diabetes mellitus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;t2dm&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;type 2 diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;type 2 diabetes mellitus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;type ii diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;type ii diabetes mellitus&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;common_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;type 2 diabetes&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;umls_cuis&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;C0011860&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;cond_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;C0011860&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">&quot;uids&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">2689</span><span class="token punctuation">,</span><span class="token number">84939</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;synonyms&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;brittle diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;brittle diabetes mellitus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes brittle&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes mellitus insulin dependent&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes mellitus type 1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes mellitus type i&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes type 1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;diabetes type i&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;iddm&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;iddm1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;insulin dependent diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;insulin dependent diabetes mellitus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;insulin-dependent diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;insulin-dependent diabetes mellitus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;juvenile onset diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;labile diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;t1dm&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;type 1 diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;type 1 diabetes mellitus&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;type i diabetes&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;type i diabetes mellitus&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;common_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;type 1 diabetes&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;umls_cuis&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;C0011854&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C0342302&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;cond_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;C0011854,C0342302&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token property">&quot;uids&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">2302</span><span class="token punctuation">,</span><span class="token number">2304</span><span class="token punctuation">,</span><span class="token number">52655</span><span class="token punctuation">,</span><span class="token number">307633</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;synonyms&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;CAD&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;cardiac ischemia&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;coronary arteriosclerosis&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;coronary artery disease&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;coronary disease&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;coronary heart disease&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;coronary stenosis&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;myocardial ischemia&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;common_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;coronary artery disease&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;umls_cuis&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;C0010054&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C0010068&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C0242231&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C1956346&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;cond_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;C0010054,C0010068,C0242231,C1956346&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token property">&quot;uids&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">13484</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;synonyms&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;depression symptoms&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;depressive symptoms&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;symptoms of depression&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;common_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;depressive symptoms&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;umls_cuis&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;C0086132&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;cond_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;C0086132&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token property">&quot;uids&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">2627</span><span class="token punctuation">,</span><span class="token number">2632</span><span class="token punctuation">,</span><span class="token number">192635</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;synonyms&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;chronic depression&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;depression&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;depression chronic&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;depressions&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;depressive disorder&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;depressive illness&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;common_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;depression&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;umls_cuis&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;C0011570&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C0011581&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C0581391&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;cond_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;C0011570,C0011581,C0581391&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token property">&quot;uids&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">198228</span><span class="token punctuation">,</span><span class="token number">245438</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;synonyms&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;major depression&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;major depressive disorder&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;severe depression&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;common_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;severe depression&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;umls_cuis&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;C0588008&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;C1269683&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;cond_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;C0588008,C1269683&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token property">&quot;uids&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">82279</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;synonyms&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;anxiety depression&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;anxiety/depression&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;depression anxiety&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;common_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;anxiety/depression&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;umls_cuis&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;C0338908&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;cond_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;C0338908&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token property">&quot;uids&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">38</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;synonyms&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;abdominal cramp&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;abdominal cramping&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;abdominal cramps&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;crampy abdominal pain&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;common_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;abdominal cramping&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;ignore&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;umls_cuis&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;C0000729&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;cond_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;C0000729&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>It&#x27;s hard to <code>ctrl-f</code> through this and you really want to get the entire objects that match a fuzzy search.</p><h2>Solution</h2><div class="remark-highlight"><pre class="language-sh"><code class="language-sh">cat YOUR_FILE | jq -c &amp;#39;.[]&amp;#39; | fzf -m</code></pre></div><p><code>jq -c</code> minimizes the ouptuput, <code>.[]</code> splits the array into separate results so you have one line per nested object, and <code>fzf -m</code> opens fzf on the output and fuzzy searches lines with the ability to select multiple matches.
You can select a line with <code>tab</code> and exit to see all the lines on stdout with <code>enter</code>.</p><p>To convert the output back into a list you can pipe back into <code>jq</code>. The <code>-s</code> flag slurps the entire input before returning.</p><div class="remark-highlight"><pre class="language-sh"><code class="language-sh">| jq -s &amp;#39;.&amp;#39;</code></pre></div></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Great articles from around the web]]></title>
            <link>https://lsmurray.com/til/great-articles</link>
            <guid>https://lsmurray.com/til/great-articles</guid>
            <pubDate>Wed, 24 Mar 2021 19:37:08 GMT</pubDate>
            <description><![CDATA[A collection of awesome articles and small summaries about why I like them. Basically my plain text equivalent of pocket.]]></description>
            <content:encoded><![CDATA[<div><ul><li><a href="https://mariusschulz.com/blog/conditional-types-in-typescript">Conditional Types in TypeScript</a><ul><li>by far the best article I&#x27;ve ever read for understanding the interaction of conditional types, mapped types, and look up types in typescript</li></ul></li></ul></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
        <item>
            <title><![CDATA[Be cautious when you use symbol polyfills]]></title>
            <link>https://lsmurray.com/til/polyfill-symbols-in-js</link>
            <guid>https://lsmurray.com/til/polyfill-symbols-in-js</guid>
            <pubDate>Mon, 29 Mar 2021 17:26:20 GMT</pubDate>
            <description><![CDATA[Polyfills can feel like a plug and play solution for supporting older browsers, but they can come with caveats which break expected behavior.]]></description>
            <content:encoded><![CDATA[<div><p>One of the projects I&#x27;m working on has to support Internet Explorer 11 (IE11).
The project also relies on an autocomplete system built using <a href="https://en.wikipedia.org/wiki/Trie#Compressing_tries">compressed tries</a>.
All of the details of the trie implementation are beyond the scope of this post, but I need to reveal some of the details to explain the issues I ran into when trying to get the trie to work in IE11.</p><p>The trie is a <a href="https://en.wikipedia.org/wiki/Hash_trie">hash trie</a> which uses javascript objects as nodes and javascript object properties as prefixes which point to child nodes.
Relying on objects and properties keeps the implementation super simple but it makes it hard to add metadata to trie nodes. For example if I want to have a property which points to a trie node&#x27;s parent I can&#x27;t use the <code>parent</code> property since that could be a prefix which points to a child. Instead I use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol">javascript symbols</a> to point to datastructure properties.</p><p>Symbols have the nice benefit that they do not show up in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in"><code>for...in</code></a> loops.
This simple fact made the code for traversing my trie very literate. I could iterate over prefixes in my trie using <code>for (const prefix in node)</code> <sup id="fnref-1"><a href="#fn-1" class="footnote-ref internal"><span>1</span></a></sup>.</p><p>Unfortunately symbols are not supported by IE11.</p><p><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:47.32142857142857%"></div><img alt="Can I Use table for symbols showing that internet explorer does not support symbols." src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></p><p>When getting the trie to work on IE11 I imported a <a href="https://github.com/zloirock/core-js#ecmascript-symbol">corejs symbol polyfill</a> and called it a day. But my datastructure completely broke.</p><p>I&#x27;m not sure if this is a common experience but this was the first time where I used a polyfill and the behavior was significantly different to the point that I had to change my code.
There were really only three issues I ran into but they were enough to require a bunch of changes in my implementation.</p><ul><li>The polyfilled symbols do show up in <code>for...in</code> loops.</li><li><code>typeof Symbol()</code> does not equal <code>symbol</code>, it equals <code>object</code></li><li><code>Symbol() in Object</code> does not work, normally you can check to see if a property is set with this syntax but with the polyfill this statement always returns true.</li></ul><p>All of these <a href="https://github.com/zloirock/core-js#caveats-when-using-symbol-polyfill">symbol issues are documented in the corejs readme</a> but this was the first time I ever realized there were caveats to be aware of.</p><div class="footnotes"><hr/><ol><li id="fn-1">In hindsight symbols just overcomplicated my implementation but at the time it felt like a reasonable decision.<a href="#fnref-1" class="footnote-backref internal">↩</a></li></ol></div></div>]]></content:encoded>
            <author>luke@lukesmurray.com (Luke Murray)</author>
        </item>
    </channel>
</rss>