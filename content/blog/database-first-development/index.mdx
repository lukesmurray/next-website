---
title: "Database First Development"
date: "2021-03-23T00:33:28"
description: "An interesting paradigm for creating websites and blogging using next.js"
draft: true
# image: /path/to/image
---

This site is an exercise in database first development.
All of the pages in the site are parsed and stored in a sqlite database.
The site is then statically generated using graphql queries on the sqlite database.

![Example Page DB](images/page-db.png)

## What is the motivating problem?

- One of the challenging aspects of building any website is organizing pages.
- Static blogging frameworks built on top of react such as Gatsby and NextJS have gained in popularity recently
  - these blogging frameworks are very flexible but they pass all the organization decisions to the user
- Other static blogging frameworks make a bunch of design decisions for the user, for example hugo basically gives you a tree of all your files
- Can we have both?
  - can we have the organization of hugo with the flexibility of nextjs

## How does it work?

- Yes we can have both
- We parse markdown into a database of markdown pages
- Each page represents a single file or folder in our content tree
- `_index.md` files are used to represent sections and `index.md` files are used to represent leaves. Other markdown files (`foo.md`) are assumed to be leaves
- In the database we can represent relationships between pages
  - Right now I mostly use `parent` and `pages` where `parent` is the parent of the current page and `pages` is a list of child pages below the current page
  - In the future we could parse the markdown ast and store it in the database and have a relationship like `linkedTo` to keep track of references between pages
- When I generate my site I use graphql to request a specific slice of data from the database based on the current page
  - Because we use graphql we only load the data we need to view the page so everything is fairlyy efficient
- Because everything is written in NextJS the data pages are generated as static html and we have zero queries at runtime

## What kind of cool things can I do

You can query the [database live](/api/graphql)

You could add new fields and relationships to other data
